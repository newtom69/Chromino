@using Data.Models
@using Data.ViewModel
@using Data.Enumeration
@using Tool
@model GameVM
@{
    Layout = "_LayoutShow.cshtml";
    ViewData["Title"] = "Chromino - Jouer";
    bool showInfoPopup = TempData["ShowInfo"] != null ? true : false;
}
@section ScriptJs
{
    <script>
    GameId = @Model.Game.Id;
    var ShowInfoPopup = @showInfoPopup.ToJs();
    </script>
}
<div id="toolbar">
    <form id="FormHome" asp-action="Index" asp-controller="Home" style="display:none"></form>
    <button id="ButtonHome" run="Home" tip="Home" class="btn btn-toolbar img-home"></button>
    <button id="ButtonInfo" run="Info" tip="Info" class="btn btn-toolbar img-infogame"></button>
    <button id="ButtonHelp" run="Help" tip="Help" class="btn btn-toolbar img-helpPlay" style="display:none">
        <span id="HelpNumber" class="notification notification-right-bottom notification-green"></span>
    </button>
    <button id="ButtonChat" run="Chat" tip="Chat" class="btn btn-toolbar img-chat" style="display:none">
        <span id="NotifPrivateMessage" class="notification notification-middle-bottom notification-blue" style="display:none"></span>
        <span id="NotifChat" class="notification notification-right-bottom notification-green" style="display:none"></span>
    </button>
    <button id="ButtonMemo" run="Memo" tip="Memo" class="btn btn-toolbar img-memo">
        <span id="NotifMemo" class="notification notification-right-bottom notification-green" style="display:none"></span>
    </button>
    <button id="ButtonDrawChromino" run="DrawChromino" tip="DrawChromino" class="btn btn-toolbar img-draw" style="display:none"></button>
    <button id="ButtonSkipTurn" run="SkipTurn" tip="SkipTurn" class="btn btn-toolbar img-skip" style="display:none"></button>
    <button id="ButtonPlayingChromino" run="PlayingChromino" tip="PlayChromino" class="btn btn-toolbar img-play" style="display:none"></button>
    <form id="FormNextGame" asp-action="ShowNextToPlay" style="display:none"></form>
    <button id="ButtonNextGame" run="NextGame" tip="NextGame" class="btn btn-toolbar img-nextgame" style="display:none"></button>
</div>
<br>
<div id="HistoryChrominos" run="HistoryChrominos" tip="HistoryChrominos">
    <button id="ButtonPreviousChromino" class="btn btn-historyChromino img-previousChromino"></button>
    <button id="ButtonNextChromino" class="btn btn-historyChromino img-nextChromino"></button>
</div>
<div id="PlayerHistoryPseudo"></div>
<div id="InfoGame"></div>
<div id="GameArea"></div>
<div id="Hand" tip="Hand">
    @foreach (ChrominoVM chrominoVM in Model.PlayerChrominosVM)
    {
        <div id="@chrominoVM.ChrominoId" class="handPlayerChromino">
            @for (int i = 0; i < 3; i++)
            {
                ColorCh color = chrominoVM.Squares[i].Color;
                string tip = color == ColorCh.Cameleon ? "tip=Camelon" : "";
                string classColor = color.ToString();
                <div @tip class="Square @classColor"></div>
            }
        </div>
    }
</div>
<div id="PopupInfo" class="popup" style="display:none">
    <div class="div-head img-infogame" title="information"></div>
    <div id="PopupInfoHead"></div>
    <form id="FormRematch" asp-action="Rematch" hidden>
    </form>
    <div id="Askrematch" style="display:none">
        <div id="Askrematch-text" class="askrematch"></div>
        <button type="submit" form="FormRematch" class="btn btn-toolbar img-rematch askrematch"></button>
    </div>
    @foreach (var pseudoId in Model.PseudosIds)
    {
        <div id="Player_@pseudoId.Value"></div>
    }
    <br />
    <p id="InStack" class="minorInfo"></p>
</div>
<div id="Waiting" class="cssload-container-general" style="display:none">
    <div class="cssload-internal"><div class="cssload-ballcolor cssload-ball_1"> </div></div>
    <div class="cssload-internal"><div class="cssload-ballcolor cssload-ball_2"> </div></div>
    <div class="cssload-internal"><div class="cssload-ballcolor cssload-ball_3"> </div></div>
    <div class="cssload-internal"><div class="cssload-ballcolor cssload-ball_4"> </div></div>
</div>